#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Source environment to ensure PATH includes Python packages
if [ -f ~/.bashrc ]; then
  . ~/.bashrc
elif [ -f ~/.zshrc ]; then
  . ~/.zshrc
elif [ -f ~/.profile ]; then
  . ~/.profile
fi

# Run formatting, linting, and type checking (required)
npm run format
npm run lint
npm run type-check

# Run all tests (fail commit if any test fails, but run all tests)
echo "Running all tests..."
GIT_HOOKS=1 npm run test -- --max-failures=0
